# Combined Subreddits - worldnews

# run:
# $ python 11.combo-world_news.py

import numpy as np

# iteration Matrix
A = np.array([
    45.0/281.0, 30.0/281.0, 10.0/281.0, 3.0/281.0, 9.0/281.0, 16.0/281.0, 1.0/281.0, 62.0/281.0, 20.0/281.0, 9.0/281.0, 0.0/281.0, 8.0/281.0, 49.0/281.0, 14.0/281.0, 5.0/281.0
])

# weighted edges matrix
B = np.array([
[0, 0.4285714286, 0.1428571429, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.2857142857, 0.1428571429],
[0.06666666667, 0.06666666667, 0.08888888889, 0, 0.06666666667, 0, 0, 0, 0, 0, 0, 0, 0.6666666667, 0, 0.04444444444],
[0.5555555556, 0.4444444444, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[0.75, 0.125, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.125, 0],
[0.05555555556, 0.1666666667, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.7777777778, 0, 0],
[0.1428571429, 0.03571428571, 0, 0, 0, 0, 0, 0, 0.4642857143, 0.1071428571, 0, 0.2142857143, 0, 0.03571428571, 0],
[0.5, 0.5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[0.5384615385, 0.07692307692, 0, 0, 0, 0, 0, 0, 0, 0.3846153846, 0, 0, 0, 0, 0],
[0.04166666667, 0.04166666667, 0.04166666667, 0, 0, 0.625, 0, 0.04166666667, 0, 0.04166666667, 0, 0, 0, 0.1666666667, 0],
[0.05405405405, 0.01351351351, 0.01351351351, 0.01351351351, 0, 0, 0, 0.8243243243, 0.08108108108, 0, 0, 0, 0, 0, 0],
[0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[0, 0.125, 0.125, 0.25, 0, 0.125, 0, 0, 0.125, 0, 0, 0.25, 0, 0, 0],
[0, 0.4090909091, 0.09090909091, 0, 0.2727272727, 0, 0, 0, 0, 0, 0, 0, 0.04545454545, 0.1818181818, 0],
[0.6, 0, 0, 0, 0, 0, 0.05, 0, 0, 0, 0, 0, 0.2, 0.05, 0.1],
[0.5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.5, 0]
])

# PAGE RANK ALGO
for i in range(100):
    C = A.dot(B)
    # A = C/C.sum(axis=0,keepdims=1)
    sums = C.sum(axis=0,keepdims=1)
    sums[sums==0] = 1
    A = C/sums

# FOR OUTPUTTING RESULT
A = [float(x) for x in A]

D = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O']
for i in range(len(A)):
    print(D[i] + " = " + str(A[i]))

# FOR THE DATA INPUT INTO SPREADSHEET:
for i in range(len(A)):
    print(str(A[i]))

# FOR TROUBLESHOOTING
print(np.sum(A))

# DATA:
# A	worldnews
# B	environment
# C	collapse
# D	Libertarian
# E	conservation
# F	LateStageCapitalism
# G	goodnews
# H	VoluntaristMemes
# I	ABoringDystopia
# J	Anarcho_Capitalism
# K	landconservation
# L	WayOfTheBern
# M	EcoNewsNetwork
# N	UpliftingNews
# O	ClimateActionPlan

# OUTPUT:
# A = 0.158809639285
# B = 0.241792077801
# C = 0.0684641886852
# D = 4.94789863268e-21
# E = 0.0889728764899
# F = 2.20373300749e-20
# G = 0.00614776789006
# H = 2.94488639299e-20
# I = 2.06796438939e-20
# J = 2.22818334875e-20
# K = 0.0
# L = 1.17188165608e-20
# M = 0.267129150364
# N = 0.122955357804
# O = 0.0457289416806